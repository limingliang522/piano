# 🧪 测试指南

## 测试用户界面功能

### ✅ 测试标签页切换

1. **打开游戏**
   - 应该看到灵动岛自动展开
   - 显示登录/注册界面

2. **完成登录/注册**
   - 注册一个新账号或登录现有账号
   - 应该看到欢迎信息
   - 灵动岛自动收起

3. **测试音乐标签（🎧）**
   - 点击灵动岛展开
   - 默认应该在音乐标签
   - 应该看到：
     - ✅ 搜索框
     - ✅ 横向滚动的曲目列表
     - ✅ 随机选择按钮（🎲）
     - ✅ 关闭按钮（✕）

4. **测试用户标签（👤）**
   - 点击"👤"图标
   - 应该看到：
     - ✅ 用户信息卡片
     - ✅ 当前用户名（渐变色显示）
     - ✅ 退出登录按钮（🚪 退出登录）
     - ✅ 关闭按钮（✕）
   - **不应该看到音乐列表或搜索框**

5. **测试设置标签（🔧）**
   - 点击"🔧"图标
   - 应该看到：
     - ✅ 音量标题和图标
     - ✅ 音量滑块
     - ✅ 音量百分比显示
     - ✅ 关闭按钮（✕）
   - **不应该看到用户信息或音乐列表**

### ✅ 测试用户功能

1. **查看用户信息**
   - 灵动岛 → 👤 用户标签
   - 应该显示当前登录的用户名
   - 用户名应该是渐变色（紫蓝色）

2. **退出登录**
   - 在用户标签中点击"🚪 退出登录"
   - 应该：
     - ✅ 播放点击音效
     - ✅ 游戏暂停
     - ✅ 音乐停止
     - ✅ 灵动岛收起
     - ✅ 自动展开显示登录界面
     - ✅ 表单已清空

3. **未登录状态**
   - 退出登录后
   - 灵动岛标题应该显示"点击登录或注册"
   - 点击展开应该显示认证界面
   - **不应该显示三个标签页**

### ✅ 测试音效

1. **点击音效**
   - 点击任何按钮应该有音效
   - 包括：
     - ✅ 标签页切换
     - ✅ 登录按钮
     - ✅ 注册按钮
     - ✅ 退出登录按钮
     - ✅ 曲目选择

2. **音量控制**
   - 在设置标签调整音量
   - 音效音量应该立即改变

### ✅ 测试响应式

1. **桌面浏览器**
   - 调整窗口大小
   - 灵动岛应该保持居中
   - 内容应该正常显示

2. **移动设备**
   - 在手机上打开
   - 灵动岛应该适配屏幕宽度
   - 触摸操作应该流畅

### ✅ 测试数据持久化

1. **刷新页面**
   - 登录后刷新页面
   - 应该自动恢复登录状态
   - 用户名应该正确显示

2. **关闭重开**
   - 关闭浏览器标签
   - 重新打开游戏
   - 应该仍然保持登录状态

3. **清除数据**
   - 退出登录
   - 或清除浏览器localStorage
   - 应该返回未登录状态

## 🐛 常见问题排查

### 问题：点击用户标签显示音乐界面
**原因：** JavaScript标签切换逻辑缺少user标签的处理
**解决：** 已修复，确保game.js中包含：
```javascript
} else if (targetTab === 'user') {
    document.getElementById('userTab').classList.add('active');
}
```

### 问题：退出登录按钮不显示
**原因：** 未调用updateUserDisplay()函数
**解决：** 确保登录成功后调用该函数

### 问题：标签页切换没有音效
**原因：** audioEngine未初始化或音量为0
**解决：** 检查音频引擎状态和音量设置

### 问题：用户名不显示渐变色
**原因：** CSS样式未正确应用
**解决：** 检查.user-name的CSS样式

## ✅ 测试清单

- [ ] 注册新账号
- [ ] 登录现有账号
- [ ] 切换到音乐标签
- [ ] 切换到用户标签
- [ ] 切换到设置标签
- [ ] 查看用户信息
- [ ] 调整音量
- [ ] 选择音乐
- [ ] 退出登录
- [ ] 刷新页面测试持久化
- [ ] 测试移动端触摸
- [ ] 测试键盘操作
- [ ] 测试音效播放

## 📊 预期结果

### 正常流程
```
1. 打开游戏
   ↓
2. 显示登录界面
   ↓
3. 注册/登录
   ↓
4. 显示欢迎信息
   ↓
5. 灵动岛收起
   ↓
6. 点击展开
   ↓
7. 显示三个标签页（🎧 👤 🔧）
   ↓
8. 切换标签查看不同内容
   ↓
9. 退出登录
   ↓
10. 返回登录界面
```

### 标签页内容对应
```
🎧 音乐标签
├─ 搜索框
├─ 曲目列表
├─ 随机按钮
└─ 关闭按钮

👤 用户标签
├─ 用户信息卡片
├─ 用户名显示
├─ 退出登录按钮
└─ 关闭按钮

🔧 设置标签
├─ 音量标题
├─ 音量滑块
├─ 音量显示
└─ 关闭按钮
```

